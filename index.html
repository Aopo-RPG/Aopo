<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AoPo RPG Hub</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<style>
body{font-family:Arial;text-align:center;background:#eaf6ff}
button{padding:10px 16px;border-radius:10px;border:none;margin:5px;cursor:pointer;font-weight:bold}
.card{background:white;padding:15px;border-radius:16px;width:260px;box-shadow:0 4px 10px rgba(0,0,0,.1)}
#gameArea{display:none;margin-top:20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;padding:20px}
#xpWrap{width:320px;height:18px;background:#003;border-radius:10px;margin:10px auto;overflow:hidden}
#xpBar{height:100%;width:0%;background:gold;transition:.3s}
#levelUp{display:none;position:fixed;top:40%;left:50%;transform:translate(-50%,-50%);
background:gold;padding:20px 40px;border-radius:20px;font-size:26px;z-index:999}
@keyframes fall{to{transform:translateY(110vh) rotate(360deg);opacity:0}}
#memGrid{display:grid;grid-template-columns:repeat(4,50px);gap:8px;justify-content:center}
.memCard{width:50px;height:50px;background:#2d6cdf;color:white;display:flex;
align-items:center;justify-content:center;border-radius:10px;font-size:22px;cursor:pointer}
</style>
</head>

<body>

<h1>ðŸ”¥ AoPo RPG Hub ðŸ”¥</h1>

<button id="signinBtn">Sign In</button>
<p id="status">Checking login...</p>

<div id="xpWrap"><div id="xpBar"></div></div>
<div id="xpText">Level 1 â€” XP 0/10</div>

<div id="levelUp">ðŸŽ‰ LEVEL UP! ðŸŽ‰</div>

<div id="gameArea">

<div class="card">
<h3>ðŸŽ¯ Reaction</h3>
<button onclick="reactionGame()">Test</button>
<p id="reactionOut"></p>
</div>

<div class="card">
<h3>ðŸŽ² Dice</h3>
<button onclick="diceGame()">Roll</button>
<p id="diceOut"></p>
</div>

<div class="card">
<h3>ðŸ”¢ Guess</h3>
<button onclick="guessGame()">Play</button>
</div>

<div class="card">
<h3>ðŸ§  Memory Flip</h3>
<div id="memGrid"></div>
</div>

</div>

<script>
// ðŸ”¥ PASTE YOUR FIREBASE CONFIG
const firebaseConfig = {
  apiKey: "AIzaSyAlWy3aiA3g4vIN19tHQQvIYgeCr5KYsUQ",
  authDomain: "aopo-fbc72.firebaseapp.com",
  projectId: "aopo-fbc72",
  appId: "1:992208374808:web:15f44a66b05334d90d076d",
};
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();

signinBtn.onclick=()=>auth.signInAnonymously();

auth.onAuthStateChanged(u=>{
 if(u){
  status.innerText="Signed in âœ…";
  signinBtn.style.display="none";
  gameArea.style.display="grid";
 } else {
  status.innerText="Not signed in";
 }
});

// XP SYSTEM
let xp=0, level=1;
function gainXP(n){
 xp+=n;
 if(xp>=10){xp=0;level++;showLevel();}
 xpBar.style.width=(xp*10)+"%";
 xpText.innerText=`Level ${level} â€” XP ${xp}/10`;
}

function showLevel(){
 levelUp.style.display="block";
 confetti();
 setTimeout(()=>levelUp.style.display="none",5000);
}

function confetti(){
 for(let i=0;i<60;i++){
  let d=document.createElement("div");
  d.style.position="fixed";
  d.style.left=Math.random()*100+"%";
  d.style.top="-10px";
  d.style.width="6px";
  d.style.height="6px";
  d.style.background=`hsl(${Math.random()*360},100%,50%)`;
  d.style.animation="fall 2s linear forwards";
  document.body.appendChild(d);
  setTimeout(()=>d.remove(),2000);
 }
}

// GAMES
function reactionGame(){
 let t=Math.floor(Math.random()*300)+100;
 reactionOut.innerText="Time "+t+" ms";
 gainXP(2);
}

function diceGame(){
 let r=Math.floor(Math.random()*6)+1;
 diceOut.innerText="Rolled "+r;
 gainXP(1);
}

function guessGame(){
 let n=Math.floor(Math.random()*5)+1;
 let g=prompt("Guess 1-5");
 if(+g===n){alert("Correct");gainXP(3);}
 else alert("It was "+n);
}

// MEMORY GAME AUTO RESET
function buildMemory(){
 memGrid.innerHTML="";
 const icons=["ðŸŽ","ðŸŽ","âš½","âš½","ðŸš€","ðŸš€","ðŸŽ®","ðŸŽ®"].sort(()=>Math.random()-0.5);
 let first=null, matches=0;

 icons.forEach(v=>{
  let c=document.createElement("div");
  c.className="memCard";
  c.innerText="?";
  c.onclick=()=>{
   if(c.innerText!=="?") return;
   c.innerText=v;
   if(!first){first=c;return;}
   if(first.innerText===c.innerText){
    matches++; gainXP(2); first=null;
    if(matches===4) setTimeout(buildMemory,800);
   } else {
    setTimeout(()=>{c.innerText="?";first.innerText="?"},600);
    first=null;
   }
  };
  memGrid.appendChild(c);
 });
}
buildMemory();
</script>

</body>
</html>
